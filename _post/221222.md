---
categories:
  - Front-End
date: '2022-12-22'
description: Reactë¡œ êµ¬í˜„í•œ í˜ì´ì§€ì—ì„œ ë’¤ë¡œê°€ê¸°ë¥¼ ëˆŒë €ì„ ë•Œ, ì´ì „ ëª©ë¡ ë° ìŠ¤í¬ë¡¤ ìœ ì§€í•˜ê¸°.
title: ë¬´í•œìŠ¤í¬ë¡¤ê³¼ ëª©ë¡ ë° ìŠ¤í¬ë¡¤ ìœ ì§€í•˜ëŠ” ë°©ë²• (feat. lazy load)
---

í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì‚¬ìš©í–ˆë˜ ë¬´í•œìŠ¤í¬ë¡¤ê³¼ ì´ë¯¸ì§€ lazy loadì— ëŒ€í•´ ì •ë¦¬í•˜ê³ , êµ¬í˜„ ë°©ë²•ì— ëŒ€í•´ ê¸°ë¡í•˜ì˜€ë‹¤.

## ğŸ“± ë¬´í•œìŠ¤í¬ë¡¤ì´ë€?

ë¬´í•œìŠ¤í¬ë¡¤ì´ë€ í˜ì´ì§€ë„¤ì´ì…˜ê³¼ ê°™ì€ í˜ì´ì§• ê¸°ë²• ì¤‘ í•˜ë‚˜ì´ë‹¤.  
íŠ¹ì • í˜ì´ì§€ ë²„íŠ¼ì„ ì§ì ‘ í´ë¦­í•˜ì—¬ ë‹¤ìŒ ì½˜í…ì¸ ë¥¼ ë°›ì•„ì˜¤ëŠ” í˜ì´ì§€ë„¤ì´ì…˜ê³¼ ë‹¤ë¥´ê²Œ, ë¬´í•œìŠ¤í¬ë¡¤ì€ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤ë§Œ í•˜ëŠ” ê²ƒìœ¼ë¡œ ì½˜í…ì¸ ë¥¼ ê³„ì†í•´ì„œ ë°›ì•„ì˜¬ ìˆ˜ ìˆê²Œ ë§Œë“  ê¸°ë²•ì´ë‹¤.  
í˜ì´ì§€ë„¤ì´ì…˜ë³´ë‹¤ ë¬´í•œìŠ¤í¬ë¡¤ì´ ë¬´ì¡°ê±´ ì¢‹ë‹¤ë¼ê³  ë“¤ë¦´ ìˆ˜ ìˆì§€ë§Œ ë¬´í•œìŠ¤í¬ë¡¤ì˜ ì¥ë‹¨ì ì€ í™•ì‹¤í•˜ê²Œ ìˆë‹¤.

### ğŸ‘ ë¬´í•œìŠ¤í¬ë¡¤ì˜ ì¥ì 

- **ì½˜í…ì¸  íƒìƒ‰ê³¼ ì‚¬ìš©ì ì°¸ì—¬ê°€ ì‰½ë‹¤.**

> ë¬´í•œ ìŠ¤í¬ë¡¤ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©ìê°€ ì›¹í˜ì´ì§€ì— ë” ì˜¤ë˜ ë‚¨ì•„ìˆì„ ìˆ˜ ìˆë‹¤.  
> ì‚¬ìš©ìê°€ íŠ¹ì • í•­ëª©ì„ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ë©´, ë§ì€ ì–‘ì˜ ì •ë³´ë¥¼ íƒìƒ‰í•˜ë©° ì›í•˜ëŠ” í•­ëª©ì„ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.  
> _ì˜ˆ) ì¸ìŠ¤íƒ€ê·¸ë¨, í‹±í†¡, ìœ íŠœë¸Œ(ì‡¼ì¸ )_

- **í´ë¦­ë³´ë‹¤ ë” ë‚˜ì€ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.**

> í˜ì´ì§€ ë²„íŠ¼ì„ í´ë¦­í•œ í›„ ë‹¤ìŒ í˜ì´ì§€ê°€ ë¡œë”©ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦´ í•„ìš” ì—†ì´, ìŠ¤í¬ë¡¤ì„ í†µí•´ ë°ì´í„°ë¥¼ ê³„ì†í—¤ì„œ ë°›ì•„ì˜¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì‚¬ìš©ì ê²½í—˜ ì¸¡ë©´ì—ì„œ ì¥ì ì´ë‹¤.

- **ëª¨ë°”ì¼ì— ì í•©í•˜ë‹¤.**

> ëª¨ë°”ì¼ì˜ ê²½ìš° í™”ë©´ì´ ë¹„êµì  ì‘ì€ í¸ì´ë©°, ì‘ì€ í™”ë©´ì—ì„œ ë§ì€ ì •ë³´ë¥¼ ë…¸ì¶œì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” ë¬´í•œìŠ¤í¬ë¡¤ì´ ì¢‹ì€ ë°©ë²•ì¼ ìˆ˜ ìˆë‹¤.

### ğŸ‘ ë¬´í•œìŠ¤í¬ë¡¤ì˜ ë‹¨ì 

- **í˜ì´ì§€ ì„±ëŠ¥ì´ ëŠë ¤ì§„ë‹¤.**

> ìŠ¤í¬ë¡¤ì„ í•˜ë©´ í• ìˆ˜ë¡ ì½˜í…ì¸ ê°€ ìŒ“ì´ê²Œ ë˜ê³ , í˜ì´ì§€ ì„±ëŠ¥ì€ ì ì  ë–¨ì–´ì§€ê²Œ ëœë‹¤.  
> ê·¸ë¡œ ì¸í•´ í˜ì´ì§€ ë¡œë”© ì†ë„ê°€ ëŠë ¤ì§€ë©°, ì´ëŠ” ì‚¬ìš©ì ê²½í—˜ì„ ì¢‹ì§€ ëª»í•˜ê²Œ ë§Œë“ ë‹¤.  
> ê²°ê³¼ì ìœ¼ë¡œ í•´ë‹¹ ì‚¬ì´íŠ¸ë¥¼ ì´ìš©í•˜ëŠ” ìœ ì €ê°€ ì ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

- **íŠ¹ì • í•­ëª© ê²€ìƒ‰ ë° ì›ë˜ ìœ„ì¹˜ë¡œ ë˜ëŒì•„ì˜¤ê¸° ì–´ë µë‹¤.**

> ìŠ¤í¬ë¡¤ì„ í†µí•´ ì‚¬ìš©ìê°€ íŠ¹ì • ì½˜í…ì¸ ì— ë„ë‹¬í–ˆë”ë¼ë„, ë‚˜ì¤‘ì— ë‹¤ì‹œ ê·¸ ì½˜í…ì¸ ë¥¼ ì°¾ì•„ê°€ê¸°ê°€ ì–´ë µë‹¤.  
> ë˜í•œ, ì‚¬ì´íŠ¸ë¥¼ ì¢…ë£Œí–ˆë‹¤ê°€ ë‹¤ì‹œ ë°©ë¬¸í–ˆì„ ë•Œ í•´ë‹¹ ìœ„ì¹˜ë¡œ ê°€ë ¤ë©´ ìŠ¤í¬ë¡¤ì„ ê³„ì†í•´ì„œ ë‚´ë ¤ì•¼ í•œë‹¤.

- **ìŠ¤í¬ë¡¤ ë§‰ëŒ€ê°€ ì‹¤ì œ ë°ì´í„°ì˜ ì–‘ì„ ë°˜ì˜í•˜ì§€ ëª»í•œë‹¤.**

> ë¬´í•œìŠ¤í¬ë¡¤ ê¸°ë²•ì€ ìŠ¤í¬ë¡¤ ë§‰ëŒ€ê°€ í˜ì´ì§€ í•˜ë‹¨ì— ë„ë‹¬í•  ë•Œì¯¤ì— ìƒˆë¡œìš´ ì½˜í…ì¸ ë¥¼ ë¡œë“œí•˜ê²Œ ë˜ë¯€ë¡œ, ìŠ¤í¬ë¡¤ ë§‰ëŒ€ê°€ ì‹¤ì œ ë°ì´í„°ì˜ ì–‘ì„ ë°˜ì˜í•˜ì§€ ëª»í•œë‹¤.  
> ìŠ¤í¬ë¡¤ ë§‰ëŒ€ê°€ í•˜ë‹¨ ê·¼ì²˜ì— ìˆë‹¤ë©´, ì‚¬ìš©ìëŠ” 'ì´ì œ ê±°ì˜ ë‹¤ ë´¤êµ¬ë‚˜'ë¼ê³  ìƒê°í•˜ë©° ìŠ¤í¬ë¡¤ì„ í•  ìˆ˜ ìˆë‹¤.  
> ê·¸ëŸ¬ë‚˜ í•˜ë‹¨ì— ë„ë‹¬í•  ë•Œì¯¤ ìƒˆë¡œìš´ ë°ì´í„°ê°€ ë¡œë“œë˜ì–´ ë˜ ë‹¤ì‹œ ìŠ¤í¬ë¡¤ì„ í•´ì•¼í•œë‹¤ë©´, ì´ëŠ” ì‚¬ìš©ìì—ê²Œ ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹ˆë‹¤.

## ğŸ¤” ì–´ë–»ê²Œ êµ¬í˜„í–ˆì–´?

ë³¸ì¸ì€ `Intersection Observer API`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬´í•œìŠ¤í¬ë¡¤ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë´¤ë‹¤.  
`Intersection Observer API`ë€ ëŒ€ìƒ ìš”ì†Œ(target)ì™€ ë·°í¬íŠ¸ê°€ êµì°¨í•˜ëŠ” ì§€ì ì˜ ë³€í™”ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê´€ì°°í•˜ëŠ” APIì´ë‹¤.

![221222 infinite-scroll.gif](/static/221222/infinite-scroll.gif)

ë¨¼ì € `Intersection Observer API`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ intersectionObserver í•¨ìˆ˜ë¥¼ ì„¤ì •í•´ì¤€ë‹¤.  
ì—¬ê¸°ì„œ entriesë€ ê´€ì°° ëŒ€ìƒ(target) ë¦¬ìŠ¤íŠ¸ì´ë©°, forEach ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ ê° entryê°€ ë·°í¬íŠ¸ì™€ êµì°¨ë˜ì—ˆëŠ”ì§€ isIntersecting ê°’ì„ í†µí•´ í™•ì¸í•œë‹¤.  
isIntersecting ê°’ì´ true(êµì°¨)ì¸ ê²½ìš° observer.unobserve(entry.target)ë¡œ ê´€ì°° ëŒ€ìƒì„ í•´ì œí•œ ë‹¤ìŒ `getData` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ì—¬ apië¥¼ ìš”ì²­í•˜ê²Œ ëœë‹¤.

```javascript
// Home.tsx
export default function Home() {
  const [postList, setPostList] = useState<PostData[]>([]);

  const getData = useCallback(async () => {
    try{
      if (!sessionStorage.getItem('postList')) {
        const res = await axios.get('/api/post/list');
        setPostList((prevList)=>[...prevList, ...res.data]);
      } else {
        setPostList(JSON.parse(sessionStorage.getItem('postList') as string));
      }
    }catch(e){
      // ë°›ì•„ì˜¬ ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°, ì¶”ê°€ ì—†ìŒ
    }
  }, []);

  const intersectionObserver = useCallback(
    (entries: IntersectionObserverEntry[], observer: IntersectionObserver) => {
      entries.forEach((entry) => {
        // ê´€ì°° ëŒ€ìƒ entryê°€ í™”ë©´ì— ë³´ì—¬ì§€ëŠ” ê²½ìš° ì‹¤í–‰
        if (entry.isIntersecting) {
          observer.unobserve(entry.target); // entry ê´€ì°° í•´ì œ
          getData(); // ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        }
      });
    },
    [getData],
  );

  // ì¤‘ëµ
}
```

ë‹¤ìŒìœ¼ë¡œ ê´€ì°° ëŒ€ìƒì„ ì„¤ì •í•˜ê¸° ìœ„í•´ `useRef` hookì„ ì‚¬ìš©í•œë‹¤.  
ë§ˆì§€ë§‰ ê²Œì‹œê¸€ì´ ë·°í¬íŠ¸ì— êµì°¨ë  ë•Œ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ë„ë¡ ì˜ë„í–ˆê¸° ë•Œë¬¸ì—, ì•„ë˜ jsxì˜ ë§ˆì§€ë§‰ Post tagì— `lastIdxRef`ë¥¼ ì„¤ì •í•´ë‘”ë‹¤.

```javascript
// Home.tsx
export default function Home() {
  const lastIdxRef = useRef(null);
  // ì¤‘ëµ
  return (
    <Wrapper>
      {postList.map((data, index) => {
        // ë§ˆì§€ë§‰ ê²Œì‹œê¸€ì„ ë‹´ê³  ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì— ë¬´í•œìŠ¤í¬ë¡¤ì„ ì ìš©ì‹œí‚¤ê¸° ìœ„í•´ refë¥¼ ë‹´ì•„ì¤Œ
        if (postList.length - 1 === index) {
          return <Post ref={lastIdxRef}> ì¤‘ëµ </Post>;
        }
        return <Post> ì¤‘ëµ </Post>;
      })}
    </Wrapper>
  );
}
```

ë§ˆì§€ë§‰ìœ¼ë¡œ `useEffect` hookì„ ì´ìš©í•˜ì—¬ postListê°€ ê°±ì‹ ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ IntersectionObserverë¥¼ ìƒì„±í•˜ì—¬ ê´€ì°° ëŒ€ìƒì¸ `lastIdxRef`ë¥¼ ë‹¤ì‹œ ê´€ì°°í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ë‹¤.

```javascript
// Home.tsx
export default function Home() {
  const [postList, setPostList] = useState<PostData[]>([]);

  const getData = useCallback(async () => {
    try{
      if (!sessionStorage.getItem('postList')) {
        const res = await axios.get('/api/post/list');
        setPostList((prevList)=>[...prevList, ...res.data]);
      } else {
        setPostList(JSON.parse(sessionStorage.getItem('postList') as string));
      }
    }catch(e){
      // ë°›ì•„ì˜¬ ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°, ì¶”ê°€ ì—†ìŒ
    }
  }, []);

  // ì¤‘ëµ

  // postListê°€ ê°±ì‹ ë  ë•Œë§ˆë‹¤ observer ì„¤ì •
  useEffect(() => {
    let io;
    if (lastIdxRef.current) {
      io = new IntersectionObserver(intersectionObserver); // ìœ„ì˜ IntersectionObserver í•¨ìˆ˜
      io.observe(lastIdxRef.current);
    }
  }, [postList, intersectionObserver]);

  // ì¤‘ëµ
}
```

## ğŸ˜µâ€ğŸ’« ê·¸ëŸ¼ ë’¤ë¡œê°€ê¸°í•  ë•Œ ìœ ì§€ëŠ” ì–´ë–»ê²Œ?

![221222 save-scroll-and-list.gif](/static/221222/save-scroll-and-list.gif)

ë°ì´í„° ëª©ë¡ê³¼ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•´ ì–´ë–¤ ë°©ë²•ì„ ì¨ì•¼í•  ì§€ ê³ ë¯¼í•˜ë‹¤ê°€ sessionStorageì™€ localStorageê°€ ìƒê°ë‚¬ê³ ,
ë¸Œë¼ìš°ì €ê°€ ì¢…ë£Œë  ë•Œ ë°ì´í„° ëª©ë¡ì„ ê°€ì§€ê³  ìˆì„ í•„ìš”ê°€ ì—†ë‹¤ê³  íŒë‹¨ë˜ì–´ sessionStorageë¥¼ ì´ìš©í•˜ì˜€ë‹¤.

ìš°ì„  íŠ¹ì • í˜ì´ì§€ë¡œ ì´ë™í•  ë•Œ, í˜„ì¬ê¹Œì§€ ë¡œë“œí•œ ë°ì´í„° ëª©ë¡ê³¼ ìŠ¤í¬ë¡¤ì˜ ìœ„ì¹˜ë¥¼ sessionStorageì— ì €ì¥  
ê·¸ë¦¬ê³  ë’¤ë¡œê°€ê¸°ë¥¼ ëˆŒëŸ¬ì„œ ì›ë˜ í˜ì´ì§€ë¡œ ëŒì•„ì™”ì„ ë•Œ, sessionStorageì— ì €ì¥í•œ ë°ì´í„° ëª©ë¡ê³¼ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ë¶ˆëŸ¬ì˜´  
sessionStorageì˜ ê²½ìš° ë¬¸ìì—´ë§Œ ì €ì¥í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, `JSON.stringify()` ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ë¬¸ìì—´ë¡œ ë³€í™˜ í›„ ì €ì¥í•˜ì˜€ë‹¤.  
ìŠ¤í¬ë¡¤ì˜ ìœ„ì¹˜ ê°’ì€ window.srcollY ê°’ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.

ì›ë˜ í˜ì´ì§€ë¡œ ëŒì•„ì™”ì„ ë•Œ ë°ì´í„° ëª©ë¡ê³¼ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ë³µêµ¬í•˜ê¸° ìœ„í•´ì„œ `useEffect` hookì„ ì´ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ëì„ ë•Œ,  
`getData` í•¨ìˆ˜ì™€ `window.scrollTo()` ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ì¬ì¡°ì • í•  ìˆ˜ ìˆì—ˆë‹¤.

```javascript
// Home.tsx
export default function Home() {
  const navigate = useNavigate();
  const [postList, setPostList] = useState<PostData[]>([]);

  // í´ë¦­ ì‹œ sessionStorageì— ë°ì´í„° ëª©ë¡ê³¼ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ê°’ì„ ì €ì¥í•˜ê³  í˜ì´ì§€ë¥¼ ì´ë™ì‹œí‚¤ëŠ” í•¨ìˆ˜
  const saveScrollYAndNavi = (pathName: string) => {
    sessionStorage.setItem('mainPageScrollY', String(window.scrollY));
    sessionStorage.setItem('postList', JSON.stringify(postList));
    navigate(pathName);
  };

  useEffect(() => {
    getData();
    // ì›ë˜ í˜ì´ì§€ë¡œ ëŒì•„ì™”ì„ ë•Œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ë³µêµ¬
    window.scrollTo({ top: Number(sessionStorage.getItem('mainPageScrollY')) });
    sessionStorage.removeItem('mainPageScrollY');
    sessionStorage.removeItem('postList');
  }, [getData]);

  return (
    <Wrapper>
      {(
        postList.map((data, index) => {
          return (
            <Post key={`${data.title}-${index + 1}-key`}>
              <ImgWrapper>
                <LazyImg
                  src={data.postImg}
                  alt={`${data.title}-1ë²ˆì§¸ ì´ë¯¸ì§€`}
                  onClick={() => saveScrollYAndNavi(`/p/${data.idx}`)}
                />
              </ImgWrapper>
          );
        })
      )}
    </Wrapper>
  );
}
```

> _ì‚¬ì‹¤ ì´ ë¶€ë¶„ì„ êµ¬í˜„í•˜ë©´ì„œ useEffectì—ì„œ window.scrollTo ë©”ì„œë“œê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆì—ˆë‹¤._  
> _ëª‡ ì‹œê°„ë™ì•ˆ ì‚½ì§ˆí•´ê°€ë©° ì°¾ì•„ë‚¸ ê²°ë¡ ì€ useEffectë‚´ getData í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì–´ ë°ì´í„° ëª©ë¡ì„ ë Œë”ë§í•˜ê¸° ì „ì— window.scrollTo ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ì—ˆë‹¤._  
> _ê·¸ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ setTimeout ë©”ì„œë“œë¥¼ ì ìš©í•˜ì—¬ getData í•¨ìˆ˜ê°€ ì‹¤í–‰ëœ ë‹¤ìŒì— window.scrollTo ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•œ ë“¯ í–ˆìœ¼ë‚˜....._  
> _ë‹¤ìŒ ë‚ ì— setTimeout ë©”ì„œë“œë¥¼ ì§€ìš°ê³  ì‹¤í–‰ì‹œì¼œë´¤ë”ë‹ˆ, ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ” ê²ƒì´ì—ˆë‹¤..!_  
> _í—ˆíƒˆí–ˆì§€ë§Œ ê·¸ë˜ë„ useEffectì˜ ë™ì‘ ì›ë¦¬ë‚˜ ë§ˆìš´íŠ¸ ìˆœì„œì— ëŒ€í•´ ë‹¤ì‹œ ê³µë¶€í•  ìˆ˜ ìˆëŠ” ê³„ê¸°ê°€ ë˜ì–´ì„œ ì¢‹ì•˜ë‹¤ê³  ìƒê°í•œë‹¤_ ğŸ˜­

## ğŸ¤” lazy loadëŠ” ë­ì•¼??

ì•„ì§ í•´ê²°í•  ë¬¸ì œê°€ í•˜ë‚˜ ë‚¨ì•„ìˆë‹¤. ê·¸ê²ƒì€ ë°”ë¡œ ì›ë˜ í˜ì´ì§€ë¡œ ëŒì•„ì™”ì„ ë•Œì´ë‹¤!  
ë§Œì•½ ëŒì•„ì™”ì„ ë•Œ ë Œë”ë§í•´ì•¼ í•  ì´ë¯¸ì§€ ëª©ë¡ì˜ ê°œìˆ˜ê°€ ìˆ˜ë°±ê°œë¼ë©´, ëª¨ë“  ì´ë¯¸ì§€ë¥¼ í•œ ë²ˆì— ë¡œë“œí•´ì•¼ í•˜ë¯€ë¡œ í˜ì´ì§€ ë¡œë”© ì†ë„ê°€ ë–¨ì–´ì§€ê²Œ ë  ê²ƒì´ë‹¤.  
ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ lazy loadì´ë‹¤.

lazy loadë€ ì´ë¯¸ì§€ë¥¼ ë‹¹ì¥ ë¡œë“œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ íŠ¹ì • ì‹œê°„ í˜¹ì€ ì§€ì ê¹Œì§€ ì§€ì—°ì‹œí‚¨ í›„ ë‚˜ì¤‘ì— ë¡œë“œí•˜ëŠ” ê²ƒìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ìµœì í™”í•˜ëŠ” ë°©ë²•ì´ë‹¤.
ë¬´í•œìŠ¤í¬ë¡¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ `Intersection Observer API`ë¥¼ ì´ìš©í•˜ì—¬ lazy loadë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆë‹¤.

lazyLoadObserver í•¨ìˆ˜ì˜ ë™ì‘ ë°©ì‹ì€ ë¬´í•œìŠ¤í¬ë¡¤ì˜ IntersectionObserver í•¨ìˆ˜ì™€ ë™ì¼í•˜ë‹¤.

- imgRefê°€ ì ìš©ëœ img íƒœê·¸ê°€ ë·°í¬íŠ¸ì™€ êµì°¨í•˜ê²Œ ë˜ë©´ isLoad ê°’ì´ trueê°€ ë¨.
- ê·¸ ë•Œ, img íƒœê·¸ì˜ srcì˜ ê°’ì´ noImage.pngê°€ ì•„ë‹ˆë¼, ë³´ì—¬ì£¼ê³ ì í•˜ëŠ” ì´ë¯¸ì§€ì˜ srcë¡œ ëŒ€ì²´ë¨.
- ì•„ì§ ë·°í¬íŠ¸ì— êµì°¨ë˜ì§€ ì•Šì€ img íƒœê·¸ì˜ srcëŠ” isLoad ê°€ false ì´ë¯€ë¡œ, ë¹„êµì  ìš©ëŸ‰ì´ ë‚®ì€ noImage.pngì„.

LazyImg ì»´í¬ë„ŒíŠ¸ë¥¼ lazy loadê°€ í•„ìš”í•œ ì´ë¯¸ì§€ì— ì ìš©í•˜ë©´ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ í•œ ë²ˆì— ë¡œë“œí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²° í•  ìˆ˜ ìˆë‹¤.

```javascript
// LazyImg.tsx
interface LazyImgProps {
  src: string;
  alt: string;
  onClick: MouseEventHandler<HTMLImageElement> | undefined;
}

export default function LazyImg({ src, alt, onClick }: LazyImgProps) {
  const [isLoad, setIsLoad] = useState(false);
  const imgRef = useRef(null);

  const lazyLoadObserver = useCallback((entries: IntersectionObserverEntry[], observer: IntersectionObserver) => {
    entries.forEach((entry) => {
      // ê´€ì°°ëŒ€ìƒ entryê°€ í™”ë©´ì— ë³´ì—¬ì§€ëŠ” ê²½ìš° ì‹¤í–‰
      if (entry.isIntersecting) {
        observer.unobserve(entry.target); // entry ê´€ì°° í•´ì œ
        setIsLoad(true);
      }
    });
  }, []);

  useEffect(() => {
    let io;
    if (imgRef.current) {
      io = new IntersectionObserver(lazyLoadObserver);
      io.observe(imgRef.current);
    }
  }, [lazyLoadObserver]);

  return <img ref={imgRef} src={isLoad ? src : '/icons/noImage.png'} alt={alt} onClick={onClick} />;
}
```

## ğŸ“– ì°¸ê³ ìë£Œ

[ë¬´í•œìŠ¤í¬ë¡¤ vs í˜ì´ì§€ë„¤ì´ì…˜](https://slowalk.com/2596)  
[Intersection Observer API ì°¸ê³ ìë£Œ 1](http://blog.hyeyoonjung.com/2019/01/09/intersectionobserver-tutorial/)  
[Intersection Observer API ì°¸ê³ ìë£Œ 2](https://heropy.blog/2019/10/27/intersection-observer/)  
[ì´ë¯¸ì§€ ì§€ì—° ë¡œë”©](https://jforj.tistory.com/163)
