---
categories:
  - Front-End
date: '2023-01-10'
description: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•ì„ ì ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì!
title: Browser Image Compressionë¥¼ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• ì ìš©
---

![ì²¨ë¶€ íŒŒì¼ì˜ ìš©ëŸ‰ ì œí•œ.png](/static/230110/maxSize.png)

_ì²˜ìŒ ì‹œë„í–ˆë˜ ì²¨ë¶€ íŒŒì¼ ìš©ëŸ‰ì„ ì œí•œí•˜ëŠ” ë°©ì‹_

ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë©´ì„œ ëŒ€ìš©ëŸ‰ì˜ ì´ë¯¸ì§€ë¥¼ ë³„ë„ì˜ ì²˜ë¦¬ ì—†ì´ ì„œë²„ë¡œ ì—…ë¡œë“œ ì‹œì¼œë²„ë¦¬ë‹ˆ í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ë¡œë”©ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤.  
ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì—…ë¡œë“œí•  ì´ë¯¸ì§€ë¥¼ inputì— ì²¨ë¶€í•  ë•Œ, ì²¨ë¶€ íŒŒì¼ì˜ ìš©ëŸ‰ ìì²´ë¥¼ ì œí•œì‹œí‚¤ëŠ” ë°©ì‹ì„ ì„ íƒí–ˆì—ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ìœ„ì˜ ë°©ë²•ì€ ì‚¬ìš©ìê°€ íŒŒì¼ì„ ì—…ë¡œë“œë¥¼ í•  ë•Œë§ˆë‹¤ ì²¨ë¶€ íŒŒì¼ì˜ ìš©ëŸ‰ì„ ì‹ ê²½ì¨ì•¼ í•œë‹¤ëŠ” ì  ë•Œë¬¸ì— ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹ˆì—ˆë‹¤.  
ê·¸ë ‡ë‹¤ë©´ ì„œë²„ì— ì „ë‹¬í•˜ê¸° ì „ì— ì‚¬ìš©ìê°€ ì•„ë‹Œ í”„ë¡ íŠ¸ ì¸¡ì—ì„œ ì´ë¯¸ì§€ì˜ ìš©ëŸ‰ê³¼ ì‚¬ì´ì¦ˆë¥¼ ì¡°ì ˆí•œ í›„ì— ì—…ë¡œë“œë¥¼ í•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ? ë¼ëŠ” ìƒê°ì„ í–ˆê³  browser-image-compression ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•ì„ í•  ìˆ˜ ìˆì—ˆë‹¤.

## ğŸ¤” Browser-Image-Compression ì‚¬ìš© ë°©ë²•

### install

```bash
npm install browser-image-compression --save

# or

yarn add browser-image-compression
```

- browser-image-compression ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ `imageCompression` í•¨ìˆ˜ë¥¼ import
- `imageCompression` í•¨ìˆ˜ì— ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„° ê°’ìœ¼ë¡œ ì••ì¶•í•˜ê³ ì í•˜ëŠ” íŒŒì¼ì„ ë„£ê³ , ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„° ê°’ìœ¼ë¡œ ì›í•˜ëŠ” optionsì„ ë„£ìœ¼ë©´ ì´ë¯¸ì§€ë¥¼ ì••ì¶•í•  ìˆ˜ ìˆë‹¤.
- ë‹¤ë§Œ, `imageCompression` í•¨ìˆ˜ëŠ” Promiseë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ `then()` ë©”ì„œë“œë¥¼ ì´ìš©í•˜ê±°ë‚˜ `async/await`ì„ ì´ìš©í•˜ì—¬ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼í•œë‹¤.

- ê¹ƒí—ˆë¸Œì™€ ë‹¤ë¥¸ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•˜ë©° ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì¡°ë¥¼ ì‚´í´ë³¸ ê²°ê³¼ javascriptì˜ Canvas APIë¥¼ ì´ìš©í•˜ë©°, optionsì—ì„œ ì„¤ì •í•œ maxSizeMBì™€ maxWidthOrHeightê°’ì„ ê°€ì§€ê³  canvasì— ì´ë¯¸ì§€ë¥¼ í¬ê¸°ì— ë§ì¶° ë Œë”ë§í•œ í›„ ìµœì¢…ì ìœ¼ë¡œ canvasë¥¼ blob í˜•íƒœë¡œ ë°˜í™˜í•˜ëŠ” êµ¬ì¡°ì¸ ê²ƒ ê°™ë‹¤.

```javascript
// imageResize.ts
import imageCompression from 'browser-image-compression';

const resizeFn = async (file: File) => {
  const options = {
    maxSizeMB: 1, // ìµœëŒ€ ìš©ëŸ‰
    maxWidthOrHeight: 1100, // ìµœëŒ€ width, height ê°’
  };

  try {
    const resizeImg = await imageCompression(file, options);
    // resizeImgëŠ” blob ë°ì´í„°

    const imgFile = new File([resizeImg], file.name, { type: file.type });
    return imgFile;
  } catch(e: any){
    console.log(e)
  }
};

export default resizeFn;
```

ì•„ë˜ì—ëŠ” optionsìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ê°’ë“¤ì´ë‹¤.

```javascript
// you should provide one of maxSizeMB, maxWidthOrHeight in the options
const options: Options = {
  maxSizeMB: number,            // (default: Number.POSITIVE_INFINITY)
  maxWidthOrHeight: number,     // compressedFile will scale down by ratio to a point that width or height is smaller than maxWidthOrHeight (default: undefined)
                                // but, automatically reduce the size to smaller than the maximum Canvas size supported by each browser.
                                // Please check the Caveat part for details.
  onProgress: Function,         // optional, a function takes one progress argument (percentage from 0 to 100)
  useWebWorker: boolean,        // optional, use multi-thread web worker, fallback to run in main-thread (default: true)

  signal: AbortSignal,          // options, to abort / cancel the compression

  // following options are for advanced users
  maxIteration: number,         // optional, max number of iteration to compress the image (default: 10)
  exifOrientation: number,      // optional, see https://stackoverflow.com/a/32490603/10395024
  fileType: string,             // optional, fileType override e.g., 'image/jpeg', 'image/png' (default: file.type)
  initialQuality: number,       // optional, initial quality value between 0 and 1 (default: 1)
  alwaysKeepResolution: boolean // optional, only reduce quality, always keep width and height (default: false)
}

imageCompression(file: File, options: Options): Promise<File>
```

ì´ë¯¸ì§€ ì••ì¶• ê²°ê³¼ 6MB í¬ê¸°ì˜ ì´ë¯¸ì§€ íŒŒì¼ì´ 0.36MBë¡œ ì••ì¶•ëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

![ì´ë¯¸ì§€ ì••ì¶• ê²°ê³¼.png](/static/230110/imageCompression.png)

## ğŸ“– ì°¸ê³ ìë£Œ

[Browser Image Compression - npm](https://www.npmjs.com/package/browser-image-compression)  
[Browser Image Compression - github](https://github.com/Donaldcwl/browser-image-compression)  
[Browser Image Compression ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì••ì¶•í•˜ëŠ” ë²•](https://velog.io/@ggong/Browser-Image-Compression-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EC%97%90%EC%84%9C-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A5%BC-%EC%95%95%EC%B6%95%ED%95%98%EB%8A%94-%EB%B2%95)  
[ìë°”ìŠ¤í¬ë¦½íŠ¸ ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•](https://labs.madisoft.it/javascript-image-compression-and-resizing/)
